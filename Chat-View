<h2>Chat</h2>                                                                   @*This view containes the chat functionality using SignalR and works concurrently with 
                                                                                the ChatHub class in the Hubs fodler. To call a function on ChatHub, first open a
                                                                                connection, then designate server, then the function call.*@

<div class="container" style="background-color: lightgray; padding-bottom: 5px">
    <h2 class="text-center">Chat Section</h2>
    <div class="container">
        <input id="username" placeholder="Username" />
        <input id="message" placeholder="Message" />
        <button id="sendButton">Send</button>
    </div>

    <div id="messageBox"></div>
</div>


@Scripts.Render("~/bundles/chat")                                                   @*This bundle and script are used to make signalr run*@
<script src="~/signalr/hubs"></script>

<script>

    var chat = $.connection.chatHub;                                                //This creates the chat object. ChatHub Functions are called on this object

    chat.client.addNewMessageToPage = function (username, message) {                //Function called by server and returned to user, then generated on page.
        $('#messageBox').append($('<p />').text(username + ' : ' + message));
    }

    $.connection.hub.start().done(function () {                                     //Function called by user and sent to server.
        $('#sendButton').click(function () {
            chat.server.sendMessage($('#username').val(), $('#message').val());
        });
    });

</script>
